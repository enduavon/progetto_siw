<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Catalogo</title>
</head>
<body>
	<h:form>
		<table>
			<tr>
				<th>Nome</th>
				<th>Prezzo per unità</th>
				<th>Codice</th>
				<th>Quantità in magazzino</th>
			</tr>
			<tbody>
				<ui:repeat var="prodotto" value="#{prodottoController.prodotti}">
					<tr>
						<td><h:commandLink
								action="#{prodottoController.findProdotto}"
								value="#{prodotto.nome}" style="color: orange">
								<f:param name="id" value="#{prodotto.id}" />
							</h:commandLink></td>
						<td>${prodotto.prezzo}</td>
						<td>${prodotto.codice}</td>
						<td>${prodotto.quantita}</td>
						<td><h:commandButton
								action="/newRigaOrdine.xhtml?faces-redirect=true"
								value="Aggiungi all'ordine"
								rendered="#{not empty loginCliente.clienteLoggato.email 
								and empty loginAdmin.admin.email}">
								<!-- <f:setPropertyActionListener
									target="#{ordineController.prodottoCorrente}"
									value="#{prodotto}" /> -->
							</h:commandButton></td>
						<td><h:commandButton
								action="#{prodottoController.deleteProdotto}"
								value="Elimina Prodotto"
								rendered="#{not empty loginAdmin.admin.email and empty loginCliente.clienteLoggato.email}">
								<f:param name="id" value="#{prodotto.id}" />
							</h:commandButton></td>
					</tr>
				</ui:repeat>
			</tbody>
		</table>
		<h:outputLink value="formCreaProdotto.xhtml?faces-redirect=true"
			rendered="#{not empty loginAdmin.admin.email and empty loginCliente.clienteLoggato.email}">
	  Aggiungi un prodotto al catalogo</h:outputLink>
	</h:form>
</body>
</html>